true
>> BUNDLE_GEMFILE=/home/ubuntu/workspace/secondbase/gemfiles/rails52.gemfile bundle exec rake test
Run options: --seed 49329

# Running:

........F

Failure:
DbTaskTest#test_secondbase_migrate_reset [/home/ubuntu/workspace/secondbase/test/cases/dbtask_test.rb:97]:
Expected /version: 20151202075826/ to match "# This file is auto-generated from the current state of the database. Instead\n# of editing this file, please use the migrations feature of Active Record to\n# incrementally modify your database, and then regenerate this schema definition.\n#\n# Note that this schema.rb definition is the authoritative source for your\n# database schema. If you need to create the application database on another\n# system, you should be using db:schema:load, not running all the migrations\n# from scratch. The latter is a flawed and unsustainable approach (the more migrations\n# you'll amass, the slower it'll run and the greater likelihood for issues).\n#\n# It's strongly recommended that you check this file into your version control system.\n\nActiveRecord::Schema.define(version: 2015_12_02_075826) do\n\n  create_table \"comments\", id: :integer, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\", force: :cascade do |t|\n    t.text \"body\"\n    t.integer \"user_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"user_id\"], name: \"index_comments_on_user_id\"\n  end\n\nend\n".

bin/rails test /home/ubuntu/workspace/secondbase/test/cases/dbtask_test.rb:93

.F

Failure:
DbTaskTest#test_abort_if_pending [/home/ubuntu/workspace/secondbase/test/cases/dbtask_test.rb:211]:
--- expected
+++ actual
@@ -1 +1,16 @@
-""
+"DEPRECATION WARNING: Leaving `ActiveRecord::ConnectionAdapters::SQLite3Adapter.represent_boolean_as_integer`
+set to false is deprecated. SQLite databases have used 't' and 'f' to serialize
+boolean values and must have old data converted to 1 and 0 (its native boolean
+serialization) before setting this flag to true. Conversion can be accomplished
+by setting up a rake task which runs
+
+  ExampleModel.where(\"boolean_column = 't'\").update_all(boolean_column: 1)
+  ExampleModel.where(\"boolean_column = 'f'\").update_all(boolean_column: 0)
+
+for all models and all boolean columns, after which the flag must be set to
+true by adding the following to your application.rb file:
+
+  Rails.application.config.active_record.sqlite3.represent_boolean_as_integer = true
+ (called from <top (required)> at /home/ubuntu/workspace/secondbase/test/dummy_apps/rails_five/config/init.rb:42)
+DEPRECATION WARNING: `secrets.secret_token` is deprecated in favor of `secret_key_base` and will be removed in Rails 6.0. (called from <top (required)> at /home/ubuntu/workspace/secondbase/test/dummy_apps/rails_five/config/init.rb:42)
+"


bin/rails test /home/ubuntu/workspace/secondbase/test/cases/dbtask_test.rb:208

......F

Failure:
DbTaskTest#test_db_migrate [/home/ubuntu/workspace/secondbase/test/cases/dbtask_test.rb:64]:
Expected /version: 20141214142700/ to match "# This file is auto-generated from the current state of the database. Instead\n# of editing this file, please use the migrations feature of Active Record to\n# incrementally modify your database, and then regenerate this schema definition.\n#\n# Note that this schema.rb definition is the authoritative source for your\n# database schema. If you need to create the application database on another\n# system, you should be using db:schema:load, not running all the migrations\n# from scratch. The latter is a flawed and unsustainable approach (the more migrations\n# you'll amass, the slower it'll run and the greater likelihood for issues).\n#\n# It's strongly recommended that you check this file into your version control system.\n\nActiveRecord::Schema.define(version: 2014_12_14_142700) do\n\n  create_table \"posts\", force: :cascade do |t|\n    t.text \"title\"\n    t.text \"body\"\n    t.integer \"user_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"user_id\"], name: \"index_posts_on_user_id\"\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string \"name\"\n    t.string \"email\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\nend\n".

bin/rails test /home/ubuntu/workspace/secondbase/test/cases/dbtask_test.rb:59

F

Failure:
DbTaskTest#test_secondbase_migrate_redo [/home/ubuntu/workspace/secondbase/test/cases/dbtask_test.rb:110]:
Expected /version: 20151202075826/ to match "# This file is auto-generated from the current state of the database. Instead\n# of editing this file, please use the migrations feature of Active Record to\n# incrementally modify your database, and then regenerate this schema definition.\n#\n# Note that this schema.rb definition is the authoritative source for your\n# database schema. If you need to create the application database on another\n# system, you should be using db:schema:load, not running all the migrations\n# from scratch. The latter is a flawed and unsustainable approach (the more migrations\n# you'll amass, the slower it'll run and the greater likelihood for issues).\n#\n# It's strongly recommended that you check this file into your version control system.\n\nActiveRecord::Schema.define(version: 2015_12_02_075826) do\n\n  create_table \"comments\", id: :integer, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\", force: :cascade do |t|\n    t.text \"body\"\n    t.integer \"user_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"user_id\"], name: \"index_comments_on_user_id\"\n  end\n\nend\n".

bin/rails test /home/ubuntu/workspace/secondbase/test/cases/dbtask_test.rb:106

..F

Failure:
DbTaskTest#test_secondbase_forward_and_rollback [/home/ubuntu/workspace/secondbase/test/cases/dbtask_test.rb:147]:
Expected /version: 20151202075826/ to match "# This file is auto-generated from the current state of the database. Instead\n# of editing this file, please use the migrations feature of Active Record to\n# incrementally modify your database, and then regenerate this schema definition.\n#\n# Note that this schema.rb definition is the authoritative source for your\n# database schema. If you need to create the application database on another\n# system, you should be using db:schema:load, not running all the migrations\n# from scratch. The latter is a flawed and unsustainable approach (the more migrations\n# you'll amass, the slower it'll run and the greater likelihood for issues).\n#\n# It's strongly recommended that you check this file into your version control system.\n\nActiveRecord::Schema.define(version: 2015_12_02_075826) do\n\n  create_table \"comments\", id: :integer, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\", force: :cascade do |t|\n    t.text \"body\"\n    t.integer \"user_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"user_id\"], name: \"index_comments_on_user_id\"\n  end\n\nend\n".

bin/rails test /home/ubuntu/workspace/secondbase/test/cases/dbtask_test.rb:143

..F

Failure:
DbTaskTest#test_secondbase_migrate_updown [/home/ubuntu/workspace/secondbase/test/cases/dbtask_test.rb:89]:
Expected /version: 20151202075826/ to match "# This file is auto-generated from the current state of the database. Instead\n# of editing this file, please use the migrations feature of Active Record to\n# incrementally modify your database, and then regenerate this schema definition.\n#\n# Note that this schema.rb definition is the authoritative source for your\n# database schema. If you need to create the application database on another\n# system, you should be using db:schema:load, not running all the migrations\n# from scratch. The latter is a flawed and unsustainable approach (the more migrations\n# you'll amass, the slower it'll run and the greater likelihood for issues).\n#\n# It's strongly recommended that you check this file into your version control system.\n\nActiveRecord::Schema.define(version: 2015_12_02_075826) do\n\n  create_table \"comments\", id: :integer, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\", force: :cascade do |t|\n    t.text \"body\"\n    t.integer \"user_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"user_id\"], name: \"index_comments_on_user_id\"\n  end\n\nend\n".

bin/rails test /home/ubuntu/workspace/secondbase/test/cases/dbtask_test.rb:78

F

Failure:
DbTaskTest#test_db_test_schema_cache_dump [/home/ubuntu/workspace/secondbase/test/cases/dbtask_test.rb:197]:
dummy schema cache does not exist

bin/rails test /home/ubuntu/workspace/secondbase/test/cases/dbtask_test.rb:190

........

Finished in 153.982718s, 0.2208 runs/s, 0.9741 assertions/s.
34 runs, 150 assertions, 7 failures, 0 errors, 0 skips
